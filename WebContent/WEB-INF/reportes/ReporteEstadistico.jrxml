<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Etadistico" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="469"/>
	<style name="Crosstab Data Text" hAlign="Center"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#FAEBD7">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#FFE4BF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#FAEBD7">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#FFE4BF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#FAEBD7">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#FFE4BF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Table Dataset 1">
		<parameter name="FechaInicio" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="FechaFin" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[select
	distinct resultado_actividad.codigo_actividad,
	dato_basico.nombre,
	planificacion_actividad.descripcion,
	resultado_actividad.observaciones,
	actividad.fecha_inicio


from
	planificacion_actividad,
	dato_basico,
	resultado_actividad,
	actividad

where
	resultado_actividad.codigo_actividad = planificacion_actividad.codigo_planificacion_actividad
	and planificacion_actividad.codigo_tipo_actividad != 500
	and dato_basico.codigo_dato_basico = resultado_actividad.codigo_resultado
	and (resultado_actividad.codigo_resultado = 258 or resultado_actividad.codigo_resultado = 259)
	and actividad.codigo_planificacion_actividad = planificacion_actividad.codigo_planificacion_actividad
	and actividad.fecha_inicio between $P{FechaInicio} and $P{FechaFin}
	and actividad.fecha_culminacion between $P{FechaInicio} and $P{FechaFin}
	and planificacion_actividad.estatus = 'A'
	and dato_basico.estatus = 'A'
	and resultado_actividad.estatus = 'A'


order by
	resultado_actividad.codigo_actividad;]]>
		</queryString>
		<field name="codigo_actividad" class="java.lang.Integer"/>
		<field name="nombre" class="java.lang.String"/>
		<field name="descripcion" class="java.lang.String"/>
		<field name="observaciones" class="java.lang.String"/>
		<field name="fecha_inicio" class="java.sql.Date"/>
	</subDataset>
	<subDataset name="Table Dataset 2"/>
	<parameter name="FechaInicio" class="java.util.Date"/>
	<parameter name="FechaFin" class="java.util.Date"/>
	<parameter name="FECHA" class="java.lang.String"/>
	<parameter name="HORA" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
	distinct estado_actividad.codigo_estado,
	count (estado_actividad.codigo_estado) as cantidadEstado,
	tablaEstado.NombreEstado



from
	estado_actividad, dato_basico, actividad, planificacion_actividad,
	(select dato_basico.nombre as NombreEstado,
	dato_basico.codigo_dato_basico as CodigoEstado

		from dato_basico

		where dato_basico.codigo_tipo_dato = 104) tablaEstado
where

	dato_basico.estatus ='A' and
	estado_actividad.codigo_actividad = actividad.codigo_actividad and
	actividad.codigo_planificacion_actividad = planificacion_actividad.codigo_planificacion_actividad and
	planificacion_actividad.codigo_tipo_actividad = dato_basico.codigo_dato_basico and
	dato_basico.parent_codigo_dato_basico = 307  and
	tablaEstado.CodigoEstado = estado_actividad.codigo_estado and
	actividad.fecha_inicio between  $P{FechaInicio} and $P{FechaFin} and
	actividad.fecha_culminacion between $P{FechaInicio} and $P{FechaFin}



group by estado_actividad.codigo_estado, tablaEstado.NombreEstado
order by codigo_estado]]>
	</queryString>
	<field name="codigo_estado" class="java.lang.Integer"/>
	<field name="cantidadestado" class="java.lang.Long"/>
	<field name="nombreestado" class="java.lang.String"/>
	<variable name="cantidadestado_SUM" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidadestado}]]></variableExpression>
	</variable>
	<variable name="codigo_estado_SUM" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{codigo_estado}]]></variableExpression>
	</variable>
	<variable name="cantidadestado_SUM_1" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidadestado}]]></variableExpression>
	</variable>
	<variable name="cantidadestado_SUM_2" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidadestado}]]></variableExpression>
	</variable>
	<variable name="cantidadestado_SUM_3" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidadestado}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="165" splitType="Stretch">
			<staticText>
				<reportElement x="408" y="121" width="41" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<staticText>
				<reportElement x="408" y="141" width="41" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Hora:]]></text>
			</staticText>
			<image>
				<reportElement x="0" y="0" width="555" height="165"/>
				<imageExpression><![CDATA["Encabezado.jpg"]]></imageExpression>
			</image>
			<textField>
				<reportElement x="450" y="141" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{HORA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="450" y="121" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FECHA}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="45" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="45"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="24" isBold="true"/>
				</textElement>
				<text><![CDATA[Estado de las Actividades Complementarias]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="33" splitType="Stretch">
			<staticText>
				<reportElement x="72" y="6" width="45" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Desde:]]></text>
			</staticText>
			<staticText>
				<reportElement x="304" y="6" width="61" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Hasta:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="118" y="6" width="100" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FechaInicio}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="365" y="6" width="100" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FechaFin}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<pageFooter>
		<band height="106" splitType="Stretch">
			<textField>
				<reportElement x="441" y="80" width="67" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["PÃ¡gina "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="508" y="80" width="42" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="3" y="0" width="552" height="74"/>
				<imageExpression><![CDATA["PieDePagina.jpg"]]></imageExpression>
			</image>
		</band>
	</pageFooter>
	<summary>
		<band height="399" splitType="Stretch">
			<elementGroup/>
			<pieChart>
				<chart>
					<reportElement x="14" y="33" width="526" height="194"/>
					<chartTitle position="Top"/>
					<chartSubtitle/>
					<chartLegend position="Bottom">
						<font fontName="Arial" size="12" pdfFontName="Times-Roman"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<keyExpression><![CDATA[$F{nombreestado}]]></keyExpression>
					<valueExpression><![CDATA[$F{cantidadestado}]]></valueExpression>
					<labelExpression><![CDATA[$F{nombreestado}+"="+$F{cantidadestado}]]></labelExpression>
				</pieDataset>
				<piePlot>
					<plot/>
					<itemLabel/>
				</piePlot>
			</pieChart>
			<staticText>
				<reportElement x="172" y="5" width="129" height="23"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Total de Actividaddes:]]></text>
			</staticText>
			<textField>
				<reportElement x="302" y="5" width="34" height="23"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cantidadestado_SUM}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="96" y="237" width="369" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Actividades Ejecutadas con Eventualidad]]></text>
			</staticText>
			<componentElement>
				<reportElement key="table 2" style="table 2" x="14" y="267" width="527" height="103"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" whenNoDataType="AllSectionsNoDetail">
					<datasetRun subDataset="Table Dataset 1">
						<datasetParameter name="FechaInicio">
							<datasetParameterExpression><![CDATA[$P{FechaInicio}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="FechaFin">
							<datasetParameterExpression><![CDATA[$P{FechaFin}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="111">
						<jr:columnHeader style="table 2_CH" height="32" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="111" height="32"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Resultado de la Actividad]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 2_CH" height="14" rowSpan="1"/>
						<jr:detailCell style="table 2_TD" height="56" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="111" height="56"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="149">
						<jr:columnHeader style="table 2_CH" height="32" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="149" height="32"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Nombre de la Actividad]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 2_CH" height="14" rowSpan="1"/>
						<jr:detailCell style="table 2_TD" height="56" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="149" height="56"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="175">
						<jr:columnHeader style="table 2_CH" height="32" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="175" height="32"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Observaciones]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 2_CH" height="14" rowSpan="1"/>
						<jr:detailCell style="table 2_TD" height="56" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="175" height="56"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{observaciones}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90">
						<jr:columnHeader style="table 2_CH" height="32" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="32"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Fecha de la Actividad]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 2_CH" height="14" rowSpan="1"/>
						<jr:detailCell style="table 2_TD" height="56" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="56"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{fecha_inicio}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</summary>
</jasperReport>
