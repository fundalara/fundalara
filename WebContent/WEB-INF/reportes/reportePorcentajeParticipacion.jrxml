<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reportePorcentajeParticipacion" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="18"/>
	<parameter name="codEquipo" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="codCompetencia" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="codCategoria" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select ((avg(desempenno_individual.valor/9)*(constante_categoria.valor))/100),persona_natural.cedula_rif ,persona_natural.primer_nombre as nombre, persona_natural.primer_apellido as apellido, competencia.nombre as competencia, categoria.nombre as categoria, equipo.nombre as equipo

from desempenno_individual, indicador_categoria_competencia, indicador, line_up, roster_competencia , roster,equipo, jugador, persona_natural, constante_categoria,constante,competencia,categoria_competencia,categoria

where
desempenno_individual.codigo_indicador_categoria_competencia =
indicador_categoria_competencia.codigo_indicador_categoria_competencia and indicador_categoria_competencia.codigo_indicador = indicador.codigo_indicador and
indicador.codigo_indicador = 7 and desempenno_individual.codigo_line_up = line_up.codigo_line_up and line_up.codigo_roster_competencia = roster_competencia.codigo_roster_competencia and
roster_competencia.codigo_roster = roster.codigo_roster and roster.cedula_rif = jugador.cedula_rif and jugador.cedula_rif = persona_natural.cedula_rif and roster.codigo_equipo = equipo.codigo_equipo and
equipo.codigo_categoria = constante_categoria.codigo_constante_categoria and constante_categoria.codigo_constante = 1
and
competencia.codigo_competencia = $P{codCompetencia}
and
competencia.codigo_competencia = categoria_competencia.codigo_competencia
and
categoria_competencia.codigo_categoria = $P{codCategoria}
and
equipo.codigo_equipo = $P{codEquipo}
and
categoria_competencia.codigo_categoria = categoria.codigo_categoria

group by
persona_natural.cedula_rif,
desempenno_individual.valor,
persona_natural.primer_nombre,
persona_natural.primer_apellido,
constante_categoria.valor,
competencia.nombre,
categoria.nombre,
equipo.nombre

order by
persona_natural.primer_nombre]]>
	</queryString>
	<field name="?column?" class="java.lang.Double"/>
	<field name="cedula_rif" class="java.lang.String"/>
	<field name="nombre" class="java.lang.String"/>
	<field name="apellido" class="java.lang.String"/>
	<field name="competencia" class="java.lang.String"/>
	<field name="categoria" class="java.lang.String"/>
	<field name="equipo" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="221" splitType="Stretch">
			<image>
				<reportElement x="0" y="-2" width="555" height="108"/>
				<imageExpression><![CDATA["../classes/Encabezado.jpg"]]></imageExpression>
			</image>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="446" y="106" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField pattern="h.mm a">
				<reportElement x="446" y="126" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="382" y="106" width="64" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<staticText>
				<reportElement x="382" y="126" width="64" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Hora:]]></text>
			</staticText>
			<textField>
				<reportElement x="93" y="126" width="265" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{competencia}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="93" y="149" width="127" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{categoria}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="94" y="171" width="106" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{equipo}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="7" y="126" width="84" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Competencia:]]></text>
			</staticText>
			<staticText>
				<reportElement x="8" y="149" width="71" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Categoria:]]></text>
			</staticText>
			<staticText>
				<reportElement x="8" y="170" width="71" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Equipo:]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="58" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="35"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="24" isBold="true" isItalic="false" isUnderline="false"/>
				</textElement>
				<text><![CDATA[Porcentaje de Participación]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="25" splitType="Stretch">
			<rectangle>
				<reportElement x="60" y="3" width="399" height="20"/>
			</rectangle>
			<staticText>
				<reportElement x="145" y="3" width="87" height="20"/>
				<textElement textAlignment="Left">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre]]></text>
			</staticText>
			<staticText>
				<reportElement x="261" y="3" width="111" height="20"/>
				<textElement textAlignment="Left">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Apellido]]></text>
			</staticText>
			<staticText>
				<reportElement x="375" y="3" width="84" height="20"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[% Participacion]]></text>
			</staticText>
			<staticText>
				<reportElement x="60" y="3" width="82" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Cédula]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="24" splitType="Stretch">
			<textField>
				<reportElement x="146" y="2" width="86" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="259" y="2" width="111" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{apellido}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="404" y="4" width="22" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{?column?}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="62" y="2" width="82" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{cedula_rif}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="55" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="112" splitType="Stretch">
			<image>
				<reportElement x="3" y="0" width="540" height="74"/>
				<imageExpression><![CDATA["../classes/PieDePagina.jpg"]]></imageExpression>
			</image>
			<textField evaluationTime="Report">
				<reportElement x="494" y="92" width="40" height="20"/>
				<textElement>
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[" de " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="414" y="92" width="80" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" "]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="184" splitType="Stretch">
			<bar3DChart>
				<chart>
					<reportElement x="60" y="17" width="399" height="143"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<categorySeries>
						<seriesExpression><![CDATA["Jugador"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{cedula_rif}]]></categoryExpression>
						<valueExpression><![CDATA[$F{?column?}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<bar3DPlot>
					<plot/>
					<itemLabel/>
				</bar3DPlot>
			</bar3DChart>
		</band>
	</summary>
</jasperReport>
